import { Colors, Fonts } from "@/constants/theme";
import React from "react";
import { StyleSheet, Text, TouchableOpacity, View } from "react-native";
import Svg, { Path } from "react-native-svg";

interface IconProps {
  color: string;
}

const HomeIcon = ({ color }: IconProps) => (
  <Svg width="25" height="25" viewBox="0 0 25 25" fill="none">
    <Path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M11.5353 0.0971923C10.9965 0.257272 10.6408 0.428094 10.291 0.694665C9.60657 1.21626 1.01742 8.6176 0.83717 8.84108C0.507616 9.24973 0.256278 9.75039 0.125294 10.2588C0.00456421 10.7276 0 10.9448 0 16.1884C0 19.8307 0.0224454 21.7533 0.0677739 21.9998C0.264968 23.0717 1.09614 24.131 2.12575 24.6225C2.88308 24.984 3.17143 25.0163 5.4498 24.9949L7.42962 24.9763L7.69578 24.79C7.8422 24.6875 8.02746 24.4806 8.10742 24.33L8.25291 24.0563V20.5943C8.25291 16.7314 8.27073 16.5159 8.6568 15.7085C9.06801 14.8484 9.7073 14.1988 10.5658 13.7685C12.2505 12.924 14.3946 13.3903 15.5694 14.8566C15.7402 15.0698 15.9788 15.4508 16.0995 15.7033C16.4883 16.5164 16.5058 16.7276 16.5058 20.5943V24.0563L16.6513 24.33C16.7313 24.4806 16.9165 24.6875 17.063 24.79L17.3292 24.9763L19.434 24.9948C21.8317 25.016 22.1104 24.9865 22.8741 24.6313C23.8974 24.1552 24.7622 23.042 24.9455 21.9647C24.9927 21.6866 25.0084 19.8335 24.9958 16.0036L24.9776 10.4462L24.8236 10.0115C24.739 9.77243 24.5268 9.3677 24.3523 9.11206C24.0676 8.69528 23.5577 8.23852 19.4107 4.68498C16.8673 2.50565 14.6532 0.637352 14.4904 0.533282C13.9474 0.186174 13.3677 0.023921 12.5982 0.00374031C12.0759 -0.00998255 11.8202 0.0124955 11.5353 0.0971923Z"
      fill={color}
    />
  </Svg>
);

const ClientsIcon = ({ color }: IconProps) => (
  <Svg width="21" height="25" viewBox="0 0 21 25" fill="none">
    <Path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M8.59834 0.195324C5.99811 0.999971 4.21695 3.66549 4.45983 6.38904C4.74383 9.57498 7.55925 11.9644 10.6889 11.6757C13.8221 11.3868 16.1693 8.52282 15.8853 5.33559C15.7532 3.85347 15.3251 2.94704 14.1944 1.75426C12.827 0.312468 10.4026 -0.363085 8.59834 0.195324ZM3.57701 14.0209C1.61672 14.7248 0 17.114 0 19.3067C0 21.5576 1.61651 23.8962 3.6628 24.6055C5.18031 25.1315 15.7943 25.1315 17.3118 24.6055C18.5844 24.1645 20.1839 22.5951 20.5514 21.427C20.7673 21.1579 20.7673 21.1579 21 20.3843C21 19.7314 21 18.6614 20.8865 18.1859C20.7883 18.2478 20.7114 17.7262 20.57 17.2459C20.2166 16.0459 18.6234 14.4626 17.3118 14.0079C15.8463 13.5001 4.99867 13.5103 3.57701 14.0209Z"
      fill={color}
    />
  </Svg>
);

const MovimentIcon = ({ color }: IconProps) => (
  <Svg width="25" height="25" viewBox="0 0 25 25" fill="none">
    <Path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M11.9232 0.168461C11.7906 0.257712 11.6091 0.439213 11.5198 0.571733L11.3575 0.812641V6.08575V11.3589H6.08381H0.810158L0.569226 11.5212C-0.172279 12.0208 -0.192273 12.926 0.526453 13.4586C0.726182 13.6066 0.776953 13.6081 6.04275 13.6272L11.3575 13.6463V18.9182V24.1899L11.5198 24.4308C12.0195 25.1723 12.9248 25.1923 13.4574 24.4736C13.6055 24.2739 13.607 24.2231 13.626 18.9592L13.6452 13.6463L18.9586 13.6272C24.223 13.6081 24.2738 13.6066 24.4735 13.4586C25.1923 12.926 25.1723 12.0208 24.4308 11.5212L24.1898 11.3589H18.9175H13.6452L13.626 6.0447C13.607 0.779439 13.6055 0.728673 13.4574 0.528964C13.0654 2.51085e-05 12.4038 -0.155415 11.9232 0.168461Z"
      fill={color}
    />
  </Svg>
);

const RecordIcon = ({ color }: IconProps) => (
  <Svg width="33" height="25" viewBox="0 0 33 25" fill="none">
    <Path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M26.7712 0.0815829C26.6538 0.132907 26.4837 0.277884 26.3931 0.403844L26.2284 0.632862L26.2106 12.4131C26.1909 25.4687 26.1572 24.4782 26.6321 24.8141C26.8458 24.9652 26.8625 24.9661 29.5968 24.9661C32.3311 24.9661 32.3477 24.9652 32.5614 24.8141C33.0341 24.4797 32.9995 25.4531 32.9994 12.4824C32.9993 1.46558 32.9922 0.755278 32.8791 0.535461C32.813 0.406911 32.6716 0.238215 32.5649 0.16058C32.3775 0.0241236 32.2805 0.0188755 29.6777 0.00388027C27.5217 -0.00859305 26.942 0.00687928 26.7712 0.0815829ZM17.8967 7.82104C17.4348 8.10022 17.4637 7.53224 17.4637 16.3303V24.2984L17.6197 24.53C17.9339 24.9962 17.9587 24.9999 20.8171 25C23.5889 25.0001 23.6557 24.9924 23.9942 24.6285L24.1661 24.4439L24.1841 16.4047C24.204 7.51745 24.2324 8.10206 23.7675 7.82104C23.559 7.69494 23.4041 7.68792 20.8321 7.68792C18.26 7.68792 18.1051 7.69494 17.8967 7.82104ZM9.20754 9.75065C8.70187 10.0856 8.73356 9.58121 8.73349 17.2877C8.73335 24.9295 8.7075 24.4859 9.17145 24.8141C9.38517 24.9652 9.4018 24.9661 12.1361 24.9661C14.8704 24.9661 14.8871 24.9652 15.1008 24.8141C15.5647 24.4859 15.5389 24.9295 15.5387 17.2877C15.5387 9.58121 15.5704 10.0856 15.0647 9.75065C14.8318 9.59634 14.8235 9.59593 12.1361 9.59593C9.44869 9.59593 9.44044 9.59634 9.20754 9.75065ZM0.512477 15.4503C0.395752 15.5209 0.232625 15.6638 0.150065 15.7678L0 15.957L0.018698 20.2005L0.037396 24.4439L0.209253 24.6286C0.547811 24.9924 0.614629 25.0001 3.3864 25C6.24665 24.9999 6.2694 24.9965 6.58528 24.5277L6.74284 24.2939L6.72414 20.0858L6.70544 15.8776L6.53358 15.6929C6.19454 15.3287 6.13109 15.3214 3.32206 15.3217C0.899636 15.3219 0.710525 15.3305 0.512477 15.4503Z"
      fill={color}
    />
  </Svg>
);

const SettingsIcon = ({ color }: IconProps) => (
  <Svg width="25" height="25" viewBox="0 0 25 25" fill="none">
    <Path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M9.42889 1.07334C9.0059 2.13462 8.99917 2.14727 8.82704 2.20166C8.73129 2.23193 8.41608 2.35674 8.12656 2.4791L7.60017 2.70151L6.54826 2.2481L5.4964 1.79468L3.64555 3.64849L1.7947 5.50234L2.24421 6.55571L2.69373 7.60913L2.47328 8.13804C2.35204 8.42896 2.22515 8.74668 2.19132 8.84404C2.13058 9.01875 2.11561 9.02671 1.06487 9.44687L0 9.87266V12.5V15.1273L1.06487 15.5531C2.11561 15.9733 2.13058 15.9812 2.19132 16.156C2.22515 16.2533 2.35204 16.571 2.47328 16.862L2.69373 17.3909L2.24421 18.4443L1.7947 19.4977L3.64409 21.35L5.49343 23.2024L6.54792 22.7509L7.60241 22.2995L8.12768 22.5214C8.41657 22.6435 8.73129 22.7681 8.82704 22.7983C8.99917 22.8527 9.0059 22.8654 9.42889 23.9267L9.85666 25H12.4798H15.1028L15.5279 23.9334C15.9474 22.8809 15.9554 22.866 16.1298 22.8052C16.227 22.7713 16.5429 22.6437 16.8318 22.5215L17.3571 22.2995L18.4116 22.7509L19.4661 23.2024L21.3154 21.35L23.1648 19.4977L22.7141 18.4415L22.2633 17.3853L22.4851 16.8591C22.607 16.5698 22.7344 16.2537 22.768 16.1566C22.8283 15.9829 22.8453 15.9738 23.9066 15.5463L24.9839 15.1123L24.9965 12.4688C25.0065 10.3673 24.9965 9.82656 24.9478 9.83203C24.914 9.83579 24.4238 9.65513 23.8583 9.43057C22.8435 9.02754 22.8294 9.01992 22.7685 8.84463C22.7346 8.74692 22.607 8.43023 22.4851 8.14087L22.2633 7.61475L22.7141 6.55855L23.1648 5.50234L21.3154 3.65L19.4661 1.79761L18.4116 2.24907L17.3571 2.70054L16.8318 2.47847C16.5429 2.3563 16.227 2.22866 16.1298 2.19478C15.9554 2.13403 15.9474 2.11914 15.5279 1.0666L15.1028 0H12.4798H9.85666L9.42889 1.07334ZM11.7485 6.30024C9.46745 6.56973 7.49063 8.11558 6.66146 10.2783C6.36628 11.0483 6.27307 11.5814 6.27307 12.5C6.27307 13.4186 6.36628 13.9517 6.66146 14.7217C7.93741 18.0497 11.7343 19.6407 14.9888 18.211C16.8047 17.4134 18.1587 15.7371 18.579 13.7663C18.7326 13.0464 18.7326 11.9536 18.579 11.2337C17.903 8.06406 14.9391 5.92334 11.7485 6.30024ZM0.022717 12.5C0.022717 13.9636 0.0289569 14.5624 0.036513 13.8306C0.0441179 13.0987 0.0441179 11.9012 0.036513 11.1694C0.0289569 10.4376 0.022717 11.0364 0.022717 12.5Z"
      fill={color}
    />
  </Svg>
);

interface NavItemProps {
  icon: React.ReactNode;
  label: string;
  focused: boolean;
  onPress: () => void;
}

const NavItem = ({ icon, label, focused, onPress }: NavItemProps) => (
  <TouchableOpacity
    style={styles.navItem}
    onPress={onPress}
    activeOpacity={0.7}
  >
    {icon}
    <Text
      style={[
        styles.navLabel,
        { color: focused ? Colors.light.primary : Colors.light.textSecondary },
      ]}
    >
      {label}
    </Text>
  </TouchableOpacity>
);

interface NavBarProps {
  currentRoute?: string;
  onNavigate?: (route: string) => void;
}

export const NavBar = ({ currentRoute = "home", onNavigate }: NavBarProps) => {
  const getIconColor = (route: string) =>
    currentRoute === route ? Colors.light.primary : Colors.light.icon;

  const handlePress = (route: string) => {
    if (onNavigate) {
      onNavigate(route);
    }
  };

  return (
    <View style={styles.container}>
      <NavItem
        icon={<HomeIcon color={getIconColor("home")} />}
        label="Início"
        focused={currentRoute === "home"}
        onPress={() => handlePress("home")}
      />
      <NavItem
        icon={<ClientsIcon color={getIconColor("clients")} />}
        label="Clientes"
        focused={currentRoute === "clients"}
        onPress={() => handlePress("clients")}
      />
      <NavItem
        icon={<MovimentIcon color={getIconColor("moviment")} />}
        label="Movimentar"
        focused={currentRoute === "moviment"}
        onPress={() => handlePress("moviment")}
      />
      <NavItem
        icon={<RecordIcon color={getIconColor("record")} />}
        label="Relatórios"
        focused={currentRoute === "record"}
        onPress={() => handlePress("record")}
      />
      <NavItem
        icon={<SettingsIcon color={getIconColor("settings")} />}
        label="Perfil"
        focused={currentRoute === "settings"}
        onPress={() => handlePress("settings")}
      />
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flexDirection: "row",
    backgroundColor: Colors.light.surface,
    paddingVertical: 15,
    paddingHorizontal: 8,
    borderTopWidth: 1,
    borderTopColor: Colors.light.border,
    alignItems: "center",
    justifyContent: "space-around",
    shadowColor: "#000",
    borderTopLeftRadius: 30,
    borderTopRightRadius: 30,
    shadowOffset: {
      width: 0,
      height: -2,
    },
    shadowOpacity: 0.05,
    shadowRadius: 4,
    elevation: 8,
  },
  navItem: {
    alignItems: "center",
    justifyContent: "center",
    flex: 1,
    gap: 4,
  },
  navLabel: {
    fontSize: 13,
    fontFamily: Fonts.textMedium,
    marginTop: 3,
  },
});
